{% extends "base.html" %}
{% load static %}

{% block page_header %}
    <div class="products-header w-100">
        <div class="row g-0">
            <div class="col mx-5">
                <h1 class="heading-font text-dark mt-3 pt-5 mx-5">
                    All Products.
                </h1>

                <!-- Displays Categories above the items sorted -->
                <div class="d-flex flex-wrap">
                    <a href="{% url 'products' %}" class="text-decoration-none">
                        <p class="text-dark px-5 fs-3 fw-normal hvr-underline-from-center"">All Products</p>
                    </a>
                    <i class="fas fa-circle fa-xs pt-3"></i>
                    {% for c in current_categories %}
                        <a class="text-decoration-none" href="{% url 'products' %}?category={{ c.name }}">
                            <span class="text-dark px-5 fs-3 fw-normal hvr-underline-from-center">{{ c.friendly_name }}</span>
                            <i class="fas fa-circle text-dark fa-xs pt-3"></i>
                        </a>
                    {% endfor %}
                </div>   

            </div>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="products-overlay"></div>
    <div class="container-fluid">
        <div class="row products-row">

            <!-- Categories -->
            <div class="categories-container col-lg-3 col-md-3 col-sm-12 mt-5 pt-3">
                <div class="container categories rounded-3 box-shadow-light py-5 d-xs-none">
                    <!-- Categories Checkbox -->
                    <p class="fs-6 fw-normal text-dark text-uppercase">Sort By</p> 
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="price_sort" 
                        {% if current_sorting == 'price_asc' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="price_sort">
                            Price
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="discounted" 
                        {% if current_sorting == 'rating_desc' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="discounted">
                            Rating
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="sneakerCategory"
                        {% if current_sorting == 'name_asc' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="sneakerCategory">
                            Alphabetical (A-Z)
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="shoeAccessories"
                        {% if current_sorting == 'name_desc' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="shoeAccessories">
                            Reverse Alphabetical (Z-A)
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="shoeAccessories"
                        {% if current_sorting == 'category_asc' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="shoeAccessories">
                            Category
                        </label>
                    </div>
                    <!-- Stock Checkboxes -->
                    <p class="fs-6 fw-normal text-dark text-uppercase pt-3">Stock</p> 
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="inStockItems" 
                        {% if current_sorting != 'None_None' %}
                            checked
                        {% endif %}>
                        <label class="form-check-label fw-light text-secondary" for="inStockItems">
                            In Stock
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value="" id="outOfStockItems">
                        <label class="form-check-label fw-light text-secondary" for="outOfStockItems">
                            Out of Stock
                        </label>
                    </div>
                    <!-- Price -->
                    <p class="fs-6 fw-normal text-dark pt-3">
                        PRICE RANGE 
                        <span class="fw-light text-dark" id="Range"></span>
                    </p> 
                    <input type="range" class="form-range" min="0" max="500" id="priceRange" 
                        oninput="showPriceRange(this.value)" onchange="showPriceRange(this.value)">
                    <label for="priceRange" class="form-label fw-lighter">Min Price €0 - Max Price €500 </label>
                </div>
            </div>

            <!-- Products -->
            <div class="product-container d-lg-flex d-md-flex d-sm-flex flex-wrap col-lg-9 col-md-9 col-sm-12 mt-5">
                {% for product in products %}
                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4 col-xl-3">
                    {% include 'includes/products-card.html' %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>

    {% include 'includes/horizontal-scroll.html' %}
{% endblock %}

{% block postloadjs %}
{{ block.super }}
    <script>
        function showPriceRange(Val){
            document.getElementById('Range').innerHTML = ` - Max: €${Val}`
        }
    </script>
{% endblock %}